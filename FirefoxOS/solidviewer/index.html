<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	 "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>

	<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7;" > 
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="style/style.css">
	<script type="text/javascript" src="include/three.min.js"></script>
	<script type="text/javascript" src="include/jsmodeler.js"></script>
	<script type="text/javascript" src="include/pagehandler.js"></script>
	<title>Solid Viewer</title>

	<script type="text/javascript">
		var pageHandler = null;
		var currentShape = null;
		var viewer = null;
	
		function GenerateShape ()
		{
			var shapeNames = [
				'Tetrahedron',
				'Hexahedron',
				'Octahedron',
				'Dodecahedron',
				'Icosahedron',
				'TruncatedTetrahedron',
				'Cuboctahedron',
				'TruncatedCube',
				'TruncatedOctahedron',
				'Rhombicuboctahedron',
				'TruncatedCuboctahedron',
				'SnubCube',
				'Icosidodecahedron',
				'TruncatedDodecahedron',
				'TruncatedIcosahedron',
				'Rhombicosidodecahedron',
				'TruncatedIcosidodecahedron',
				'SnubDodecahedron',
				'TetrakisHexahedron',
				'RhombicDodecahedron',
				'PentakisDodecahedron',
				'SmallStellatedDodecahedron',
				'GreatDodecahedron',
				'SmallTriambicIcosahedron',
				'GreatStellatedDodecahedron',
				'SmallTriakisOctahedron',
				'StellaOctangula',
				'TriakisTetrahedron'
			];

			var body = JSM.GenerateSolidWithRadius (shapeNames[currentShape], 1.0);
			
			var materials = new JSM.Materials ();
			materials.AddMaterial (new JSM.Material (0x008ab8, 0x008ab8));
			materials.AddMaterial (new JSM.Material (0x279b61, 0x279b61));
			materials.AddMaterial (new JSM.Material (0xcc3333, 0xcc3333));

			var vertexCountToColor = [];
			var currentColor = 0;
				
			var i, polygon, vertexCount;
			for (i = 0; i < body.PolygonCount (); i++) {
				polygon = body.GetPolygon (i);
				vertexCount = polygon.VertexIndexCount ();
				if (vertexCountToColor[vertexCount] === undefined) {
					vertexCountToColor[vertexCount] = currentColor;
					currentColor++;
				}
				polygon.SetMaterialIndex (vertexCountToColor[vertexCount]);
			}

			var meshes = JSM.ConvertBodyToThreeMeshes (body, materials);
			viewer.RemoveMeshes ();
			for (var i = 0; i < meshes.length; i++) {
				viewer.AddMesh (meshes[i]);
			}
			viewer.FitInWindow ();
		}
		
		function SetCurrentShape (index)
		{
			currentShape = index;
			BackToMain ();
		}
		
		function BackToMain ()
		{
			pageHandler.SetToPage (0);
			Resize ();
			GenerateShape ();
		}

		function ShowShapeList ()
		{
			pageHandler.SetToPage (1);
			Resize ();
		}

		function Resize ()
		{
			var page = pageHandler.GetPage ();
			var menus = document.getElementsByClassName ('menu');
			var contents = document.getElementsByClassName ('content');
			
			var menu = menus[page];
			var content = contents[page];
			content.style.width = window.innerWidth + 'px';
			content.style.height = (window.innerHeight - menu.clientHeight) + 'px';
			
			if (page == 0) {
				var canvas = document.getElementById ('viewer');
				canvas.setAttribute ('width', window.innerWidth);
				canvas.setAttribute ('height', window.innerHeight - menu.clientHeight);
				if (viewer != null) {
					viewer.Resize ();
					if (viewer.MeshCount () > 0) {
						viewer.FitInWindow ();
					}
				}
			}
		}

		function Load ()
		{
			pageHandler = new PageHandler ();
			pageHandler.SetToPage (0);
			
			var TextureLoaded = function () {
				viewer.Draw ();
			};

			var viewerSettings = {
				cameraEyePosition : [-2.0, -1.5, 1.0],
				cameraCenterPosition : [0.0, 0.0, 0.0],
				cameraUpVector : [0, 0, 1],
				cameraDisableZoom : true,
				cameraFixUp : true
			};

			viewer = new JSM.Viewer ();
			viewer.Start ('viewer', viewerSettings);

			window.onresize = Resize;
			Resize ();
			
			currentShape = 1;
			GenerateShape ();
		}
	
	    window.onload = function ()
		{
			Load ();			
		}
	</script>

</head>

<body>
	<div class="page">
		<div class="menu" id="mainmenu">
			<div class="text" id="maintext">solids</div>
			<a href="javascript:ShowShapeList ();"><div class="righticonbutton"><img src="images/menu.png"></div></a>
		</div>
		<div class="content">
			<canvas id="viewer" width="300" height="200"></canvas>
		</div>
	</div>

	<div class="page">
		<div class="menu">
			<div class="text">solids</div>
			<a href="javascript:BackToMain ();"><div class="righticonbutton"><img src="images/back.png"></div></a>
		</div>
		<div class="content">
			<div class="parametertitle">platonic solids</div>
			<a href="javascript:SetCurrentShape (0)"><div class="parameter">tetrahedron</div></a>
			<a href="javascript:SetCurrentShape (1)"><div class="parameter">hexahedron</div></a>
			<a href="javascript:SetCurrentShape (2)"><div class="parameter">octahedron</div></a>
			<a href="javascript:SetCurrentShape (3)"><div class="parameter">dodecahedron</div></a>
			<a href="javascript:SetCurrentShape (4)"><div class="parameter">icosahedron</div></a>
			<div class="parametertitle">archimedean solids</div>
			<a href="javascript:SetCurrentShape (5)"><div class="parameter">truncated tetrahedron</div></a>
			<a href="javascript:SetCurrentShape (6)"><div class="parameter">cuboctahedron</div></a>
			<a href="javascript:SetCurrentShape (7)"><div class="parameter">truncatedcube</div></a>
			<a href="javascript:SetCurrentShape (8)"><div class="parameter">truncated octahedron</div></a>
			<a href="javascript:SetCurrentShape (9)"><div class="parameter">rhombicuboctahedron</div></a>
			<a href="javascript:SetCurrentShape (10)"><div class="parameter">truncated cuboctahedron</div></a>
			<a href="javascript:SetCurrentShape (11)"><div class="parameter">snub cube</div></a>
			<a href="javascript:SetCurrentShape (12)"><div class="parameter">icosidodecahedron</div></a>
			<a href="javascript:SetCurrentShape (13)"><div class="parameter">truncated dodecahedron</div></a>
			<a href="javascript:SetCurrentShape (14)"><div class="parameter">truncated icosahedron</div></a>
			<a href="javascript:SetCurrentShape (15)"><div class="parameter">rhombicosidodecahedron</div></a>
			<a href="javascript:SetCurrentShape (16)"><div class="parameter">truncated icosidodecahedron</div></a>
			<a href="javascript:SetCurrentShape (17)"><div class="parameter">snub dodecahedron</div></a>
			<div class="parametertitle">cumulated solids</div>
			<a href="javascript:SetCurrentShape (18)"><div class="parameter">tetrakis hexahedron</div></a>
			<a href="javascript:SetCurrentShape (19)"><div class="parameter">rhombic dodecahedron</div></a>
			<a href="javascript:SetCurrentShape (20)"><div class="parameter">pentakis dodecahedron</div></a>
			<a href="javascript:SetCurrentShape (21)"><div class="parameter">small stellated dodecahedron</div></a>
			<a href="javascript:SetCurrentShape (22)"><div class="parameter">great dodecahedron</div></a>
			<a href="javascript:SetCurrentShape (23)"><div class="parameter">small triambic icosahedron</div></a>
			<a href="javascript:SetCurrentShape (24)"><div class="parameter">great stellated dodecahedron</div></a>
			<a href="javascript:SetCurrentShape (25)"><div class="parameter">small triakis octahedron</div></a>
			<a href="javascript:SetCurrentShape (26)"><div class="parameter">stella octangula</div></a>
			<a href="javascript:SetCurrentShape (27)"><div class="parameter">triakis tetrahedron</div></a>
		</div>
	</div>	
</body>

</html>
